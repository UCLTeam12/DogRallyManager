@using DogRallyManager.Entities
@using Microsoft.AspNetCore.Identity;
@inject UserManager<RallyUser> userManager;
@model DogRallyManager.Entities.ChatRoom

<div id="chat" class="chat-minimized" onclick="toggleClass('chat', 'chat-minimized', 'chat-expanded')">
    <div id="chat-notifications" class="chat-unread"><p id="unread-amount">17</p></div>
    <div id="chat-window">
        <ul id="chat-history">
            <script>
                console.log("before foreach loop");
            </script>
            @foreach (var message in Model.ChatMessages)
            {
                <script>
                    console.log("trying to upload");
                </script>
                @if (message.Sender.UserName == User.Identity.Name)
                {
                    <li class="message-sent">You: @message.MessageBody</li>
                    <script>
                        console.log("verified username");
                    </script>
                }
                else
                {
                    <script>
                        console.log("else statement was hit");
                    </script>
                    <li class="message-response">@message.Sender.UserName: @message.MessageBody</li> <!-- Messages from other users has class .message-response. -->
                }
            }
        </ul>
    </div>
    <div>
        <input id="chat-write" type="text" />
        <button id="chat-send" type="submit">Send</button>
    </div>
</div>